# VM Snapshot - 2026-01-02_161700

## monitor-backend (repo na VM)
- path: /home/questar/monitor-backend
- branch: main
- sha: 2dd18e8e1b5cc6f95784ca3597564793b7fd58ea

### git status -sb
## main...origin/main
 M .gitignore
D  .session_token
 M dist/routes/adminRoutes.js
 M dist/ws/wsClient.js
 M dist/ws/wsFrame.js
 M src/ws/wsClient.ts
 M src/ws/wsFrame.ts
 M tools/sb_run_vm.js
?? dist/routes/workerSessionTokenRoutes.js
?? tools/sb_run_vm_full.sh

## systemd worker (status resumido)
● monitor-schemebuilder-worker.service - Worker SchemeBuilder - monitor-backend
   Loaded: loaded (/etc/systemd/system/monitor-schemebuilder-worker.service; enabled; vendor preset: enabled)
  Drop-In: /etc/systemd/system/monitor-schemebuilder-worker.service.d
           └─05-ws-login.conf, 06-disable-token-pull.conf, 10-env-and-dns.conf, 10-render.conf, 10-worker-tokenpull.conf, 10-worker.conf, 11-secrets.conf, 12-disable-render-tokenpull.conf, 12-secrets.conf, 13-disable-render-tokenpull.conf, 20-ws-timeout.conf, 20-ws-timeouts.conf, 21-timeouts-15s.conf, 30-allow-remote.conf, 40-ws-guid.conf, 50-sb-encode.conf, 60-secrets.conf, 61-disable-render-tokenpull.conf, 62-ws-debug.conf, 90-local-login.conf, 99-jobserver.conf
   Active: active (running) since Fri 2026-01-02 11:23:44 -03; 4h 53min ago
 Main PID: 13910 (node)
    Tasks: 11 (limit: 2319)
   CGroup: /system.slice/monitor-schemebuilder-worker.service
           └─13910 node dist/worker/schemeBuilderWorker.js

jan 02 16:07:17 Tunel env[13910]: [worker] poll /api/jobs/next: 204 (sem job)
jan 02 16:08:17 Tunel env[13910]: [worker] poll /api/jobs/next: 204 (sem job)
jan 02 16:09:18 Tunel env[13910]: [worker] poll /api/jobs/next: 204 (sem job)
jan 02 16:10:18 Tunel env[13910]: [worker] poll /api/jobs/next: 204 (sem job)
jan 02 16:11:19 Tunel env[13910]: [worker] poll /api/jobs/next: 204 (sem job)
jan 02 16:12:20 Tunel env[13910]: [worker] poll /api/jobs/next: 204 (sem job)
jan 02 16:13:21 Tunel env[13910]: [worker] poll /api/jobs/next: 204 (sem job)
jan 02 16:14:22 Tunel env[13910]: [worker] poll /api/jobs/next: 204 (sem job)
jan 02 16:15:22 Tunel env[13910]: [worker] poll /api/jobs/next: 204 (sem job)
jan 02 16:16:23 Tunel env[13910]: [worker] poll /api/jobs/next: 204 (sem job)

## systemd worker (paths — sem conteúdo sensível)
FragmentPath=/etc/systemd/system/monitor-schemebuilder-worker.service
DropInPaths=/etc/systemd/system/monitor-schemebuilder-worker.service.d/05-ws-login.conf /etc/systemd/system/monitor-schemebuilder-worker.service.d/06-disable-token-pull.conf /etc/systemd/system/monitor-schemebuilder-worker.service.d/10-env-and-dns.conf /etc/systemd/system/monitor-schemebuilder-worker.service.d/10-render.conf /etc/systemd/system/monitor-schemebuilder-worker.service.d/10-worker-tokenpull.conf /etc/systemd/system/monitor-schemebuilder-worker.service.d/10-worker.conf /etc/systemd/system/monitor-schemebuilder-worker.service.d/11-secrets.conf /etc/systemd/system/monitor-schemebuilder-worker.service.d/12-disable-render-tokenpull.conf /etc/systemd/system/monitor-schemebuilder-worker.service.d/12-secrets.conf /etc/systemd/system/monitor-schemebuilder-worker.service.d/13-disable-render-tokenpull.conf /etc/systemd/system/monitor-schemebuilder-worker.service.d/20-ws-timeout.conf /etc/systemd/system/monitor-schemebuilder-worker.service.d/20-ws-timeouts.conf /etc/systemd/system/monitor-schemebuilder-worker.service.d/21-timeouts-15s.conf /etc/systemd/system/monitor-schemebuilder-worker.service.d/30-allow-remote.conf /etc/systemd/system/monitor-schemebuilder-worker.service.d/40-ws-guid.conf /etc/systemd/system/monitor-schemebuilder-worker.service.d/50-sb-encode.conf /etc/systemd/system/monitor-schemebuilder-worker.service.d/60-secrets.conf /etc/systemd/system/monitor-schemebuilder-worker.service.d/61-disable-render-tokenpull.conf /etc/systemd/system/monitor-schemebuilder-worker.service.d/62-ws-debug.conf /etc/systemd/system/monitor-schemebuilder-worker.service.d/90-local-login.conf /etc/systemd/system/monitor-schemebuilder-worker.service.d/99-jobserver.conf

## last logs (últimas 40 linhas, com redaction)
[worker] poll /api/jobs/next: 204 (sem job)
[worker] poll /api/jobs/next: 204 (sem job)
[worker] poll /api/jobs/next: 204 (sem job)
[worker] poll /api/jobs/next: 204 (sem job)
[worker] poll /api/jobs/next: 204 (sem job)
[worker] poll /api/jobs/next: 204 (sem job)
[worker] poll /api/jobs/next: 204 (sem job)
[worker] poll /api/jobs/next: 204 (sem job)
[worker] poll /api/jobs/next: 204 (sem job)
[worker] poll /api/jobs/next: 204 (sem job)
[worker] poll /api/jobs/next: 204 (sem job)
[worker] poll /api/jobs/next: 204 (sem job)
[worker] poll /api/jobs/next: 204 (sem job)
[worker] poll /api/jobs/next: 204 (sem job)
[worker] poll /api/jobs/next: 204 (sem job)
[worker] poll /api/jobs/next: 204 (sem job)
[worker] poll /api/jobs/next: 204 (sem job)
[worker] poll /api/jobs/next: 204 (sem job)
[worker] poll /api/jobs/next: 204 (sem job)
[worker] poll /api/jobs/next: 204 (sem job)
[worker] poll /api/jobs/next: 204 (sem job)
[worker] poll /api/jobs/next: 204 (sem job)
[worker] poll /api/jobs/next: 204 (sem job)
[worker] poll /api/jobs/next: 204 (sem job)
[worker] poll /api/jobs/next: 204 (sem job)
[worker] poll /api/jobs/next: 204 (sem job)
[worker] poll /api/jobs/next: 204 (sem job)
[worker] poll /api/jobs/next: 204 (sem job)
[worker] poll /api/jobs/next: 204 (sem job)
[worker] poll /api/jobs/next: 204 (sem job)
[worker] poll /api/jobs/next: 204 (sem job)
[worker] poll /api/jobs/next: 204 (sem job)
[worker] poll /api/jobs/next: 204 (sem job)
[worker] poll /api/jobs/next: 204 (sem job)
[worker] poll /api/jobs/next: 204 (sem job)
[worker] poll /api/jobs/next: 204 (sem job)
[worker] poll /api/jobs/next: 204 (sem job)
[worker] poll /api/jobs/next: 204 (sem job)
[worker] poll /api/jobs/next: 204 (sem job)
[worker] poll /api/jobs/next: 204 (sem job)
